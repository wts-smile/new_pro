<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>我的购物车</title>
    <link rel="stylesheet" type="text/css" href="css/style.css" />
    <link rel="stylesheet" type="text/css" href="css/css2.css" />
</head>

<body class="myborder">

    <div class="b">
        <div class="cart">
            <div class="cart-title">搜索结果</div>
            <table class="cart-table">
                <tr>

                    <th>商品</th>
                    <th width="120">单价</th>
                    <th width="100">库存</th>
                    <th width="80">操作</th>
                </tr>
                <tr class="cart-item" v-for="(item,index) in list">
                    <td class="cart-txt-left"><span class="cart-name"><a href="#"
                                style="text-decoration: none;">{{item.name}}</a> </span></td>
                    <td><span class="cart-price">{{item.price}}</span></td>
                    <td>
                        <span class="cart-num">{{item.num}}</span>
                    </td>
                    <td><span class="cart-del"><button @click="remove(index)">移除</button></span></td>
                </tr>

            </table>
        </div>



    </div>



    <script src="plugins/vue/vue.js"></script>
    <script src="plugins/vue/axios.js"></script>

    <script>
        var app = new Vue({
            el: ".b",
            data: {
                list: [{ id: 1, name: "草莓", price: 10, num: 1, active: true },
                { id: 2, name: "巧克力", price: 30, num: 2, active: false },
                { id: 3, name: "奶油蛋糕", price: 50, num: 3, active: true }],
            },
            methods: {
                remove: function (index) {//移除单个
                    if (confirm('你确定要删除吗?')) {
                        this.list.splice(index, 1);
                    }
                },
                removelot: function () {//多选移除
                    var list = []
                    for (let i = 0; i < this.list.length; i++) {
                        if (this.list[i].active == false)
                            list.push(this.list[i])
                    }
                    this.list = list
                },
                removeAll: function () {
                    if (confirm('你确定要删除吗?')) {
                        this.list = []
                    }

                },
                created: function () {
                    var that = this
                    axios.get('待定localhost和具体地址').then(function (resp) {
                        that.list = resp.data;//先默认返回的文件中data是需要的商品数组,数组内的数据格式你根据后端返回的数据调一下
                    })
                }
            },
            computed: {
                total: function () {//计算总价
                    let sum = 0;
                    for (let i = 0; i < this.list.length; i++) {
                        if (this.list[i].active)
                            sum += this.list[i].price * this.list[i].num;
                    }
                    return sum;
                },
                count: function () {//计算总数
                    let sum = 0;
                    for (let i = 0; (i < this.list.length); i++) {
                        if (this.list[i].active)
                            sum += this.list[i].num;
                    }
                    return sum;
                }
            },
        })
    </script>
</body>

</html>